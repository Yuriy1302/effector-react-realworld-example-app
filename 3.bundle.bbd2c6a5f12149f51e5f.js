(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{Riw5:function(e,t,r){"use strict";r.r(t);var n=r("dY8W"),c=r("rEH3"),a=r("UYjC"),i=r("YSF1"),o=r("lyZd"),u=r("eZyy"),s=r("YzYS"),l=r("3OV0"),f=Object(i.createEffect)((function(e){var t=e.username,r=e.page,n=e.pageSize;return u.a.get("articles?author=".concat(encodeURIComponent(t),"&").concat(Object(s.a)(n,r))).then((function(e){return e.data}))})),d=c.e({pageSize:5,status:Object(o.status)({effect:f})}),j=d.Gate,b=d.currentPageWasSet,p=d.favoriteToggled,g=d.$currentPage,O=d.$articles,m=(d.$totalPages,d.$feed),v=d.$pageSize,h=d.useModel;m.on(f.doneData,(function(e,t){return t})),Object(i.sample)({source:{username:l.e,page:g,pageSize:v},clock:[j.open,b],target:f});var y=r("oYCi");t.default=function(){Object(n.b)(j);var e=Object(n.d)(f.pending),t=h(),r=t.totalPages,i=t.currentPage,o=t.pageSize,u=t.isEmptyFeed;return Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)(c.d,{show:u}),Object(y.jsx)(c.c,{children:Object(n.c)(O,{getKey:function(e){return e.slug},fn:function(e){return Object(y.jsx)("li",{children:Object(y.jsx)(c.b,{data:e,onClick:function(){return p(e)}})})}})}),Object(y.jsx)(a.m,{current:i,pageSize:o,total:r,onItemClick:b}),Object(y.jsx)(a.o,{loading:e})]})}},YzYS:function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));var n=function(e,t){return"limit=".concat(e,"&offset=").concat(t*e)}},lyZd:function(e,t,r){var n=r("YSF1").createStore,c=r("q0Di").readConfig;e.exports={status:function(e){var t=c(e,["sid","name","loc","effect","defaultValue"]),r=t.sid,a=t.name,i=t.loc,o=t.effect,u=t.defaultValue,s=n(void 0===u?"initial":u,{sid:r,loc:i,name:a});return s.on(o,(function(){return"pending"})).on(o.done,(function(){return"done"})).on(o.fail,(function(){return"fail"})),s}}},q0Di:function(e,t){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e,t,r){r.filter((function(t){return void 0!==e[t]})).forEach((function(r){t[r]=e[r]}))}e.exports={readConfig:function e(t,c){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return"object"!==r(t)||null===t||(t.config&&e(t.config,c,a),n(t,a,c),t.ɔ&&e(t.ɔ,c,a)),a}}},rEH3:function(e,t,r){"use strict";r.d(t,"e",(function(){return f})),r.d(t,"b",(function(){return O})),r.d(t,"c",(function(){return m})),r.d(t,"a",(function(){return p})),r.d(t,"d",(function(){return v}));var n=r("YSF1"),c=r("dY8W"),a=r("eZyy"),i=r("6le1");function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){s(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var l={currentPage:1,pageSize:10,status:Object(n.createStore)("initial")},f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l,t=u(u({},l),e),r=Object(n.createEvent)(),o=Object(n.createEvent)(),s=Object(n.createEffect)((function(e){return a.a.post("articles/".concat(e,"/favorite")).then((function(e){return e.data}))})),f=Object(n.createEffect)((function(e){return a.a.delete("articles/".concat(e,"/favorite")).then((function(e){return e.data}))})),d=Object(n.createStore)(t.pageSize),j=i.f.$search.map((function(e){var t;return null!==(t=new URLSearchParams(e).get("tag"))&&void 0!==t?t:""})),b=i.f.$search.map((function(e){var r,n=null!==(r=new URLSearchParams(e).get("page"))&&void 0!==r?r:t.currentPage;return Number(n)-1})),p=Object(n.createStore)({articles:[],articlesCount:0}).on([s.done,f.done],(function(e,t){var r=t.params,n=t.result;return u(u({},e),{},{articles:e.articles.map((function(e){return e.slug!==r?e:u(u({},e),{},{favorited:n.article.favorited,favoritesCount:n.article.favoritesCount})}))})})),g=p.map((function(e){return e.articles})),O=p.map((function(e){return e.articlesCount})),m=t.status,v=Object(n.combine)(m,g,(function(e,t){return"done"===e&&0===t.length}));Object(n.sample)({source:i.f.$pathname,clock:r,fn:function(e,t){return{path:e,page:t}}}).watch((function(e){var t=e.path,r=e.page;i.e.replace("".concat(t,"?page=").concat(r))})),Object(n.guard)({source:o,filter:function(e){return!0===e.favorited},target:f.prepend((function(e){return e.slug}))}),Object(n.guard)({source:o,filter:function(e){return!1===e.favorited},target:s.prepend((function(e){return e.slug}))}),Object(n.guard)({source:s.failData,filter:function(e){var t;return 401===(null===(t=e.response)||void 0===t?void 0:t.status)}}).watch((function(){i.e.push(i.d.LOGIN)}));var h=Object(n.combine)({pageSize:d,currentPage:b,currentTag:j,totalPages:O,isEmptyFeed:v});return{Gate:Object(c.a)(),currentPageWasSet:r,favoriteToggled:o,setFavoriteArticleFx:s,setUnfavoriteArticleFx:f,$feed:p,$articles:g,$pageSize:d,$currentPage:b,$currentTag:j,$totalPages:O,$isEmptyFeed:v,useModel:function(){return Object(c.d)(h)}}},d=r("USb2"),j=r("UYjC"),b=r("oYCi"),p=function(e){var t=e.author,r=e.createdAt,n=e.children;return Object(b.jsxs)("div",{className:"article-meta",children:[Object(b.jsx)(d.a,{to:"/@".concat(t.username),children:Object(b.jsx)("img",{alt:t.username,src:t.image})}),Object(b.jsxs)("div",{className:"info",children:[Object(b.jsx)(d.a,{className:"author",to:"/@".concat(t.username),children:t.username}),Object(b.jsx)("span",{className:"date",children:new Date(r).toDateString()})]}),n]})},g=function(e){var t=e.active,r=e.onClick,n=e.children;return Object(b.jsxs)(j.b,{className:"btn btn-sm btn-outline-primary","data-active":t,onClick:r,children:[Object(b.jsx)("i",{className:"ion-heart"})," ",n]})},O=function(e){var t=e.data,r=t.author,n=t.createdAt,c=t.slug,a=t.title,i=t.description,o=t.tagList,u=t.favorited,s=t.favoritesCount,l=e.onClick;return Object(b.jsxs)("article",{className:"article-preview",children:[Object(b.jsx)(p,{author:r,createdAt:n,children:Object(b.jsx)("div",{className:"pull-xs-right",children:Object(b.jsx)(g,{active:u,onClick:l,children:s})})}),Object(b.jsxs)(d.a,{className:"preview-link",to:"/article/".concat(c),children:[Object(b.jsx)("h1",{children:a}),Object(b.jsx)("p",{children:i}),Object(b.jsx)("span",{children:"Read more..."}),Object(b.jsx)(j.q,{children:o.map((function(e){return Object(b.jsx)(j.p,{children:e.toLowerCase()},e)}))})]})]})},m=function(e){var t=e.children;return Object(b.jsx)("ul",{className:"articles-wrapper list-unstyled",children:t})},v=function(e){return e.show?Object(b.jsx)("div",{className:"empty-articles article-preview",children:"No articles are here... yet."}):null}}}]);