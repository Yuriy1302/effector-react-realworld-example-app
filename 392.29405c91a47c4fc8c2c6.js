"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[392],{5392:function(e,r,t){t.r(r),t.d(r,{default:function(){return R}});var n=t(9635),o=t(9041),i=t(797),s=t(8438),u=t(1549),a=(0,u.yM)(),l=(0,u.yM)(),c=(0,s.Np)({fields:{currentTag:{init:""}}});(0,u.UP)({source:c.fields.currentTag.$value,clock:(0,u.lo)(l,{filter:function(e){return"Enter"===e.key}}),target:a}),(0,u.eH)({from:a,to:c.reset});var d=t(4246),f=function(){var e=(0,s.cI)(c).fields;return(0,d.jsx)(i.l0,{onSubmit:function(e){return e.preventDefault()},children:(0,d.jsx)(i.II,{autoComplete:"off",name:"tag-list",placeholder:"Enter tags",value:e.currentTag.value,onChange:function(r){return e.currentTag.onChange(r.target.value)},onKeyDown:l})})},v=t(5599),m=t(2793),g=["tagList"],h=["tagList"];function p(e){return function(e){if(Array.isArray(e))return y(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,r){if(!e)return;if("string"==typeof e)return y(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return y(e,r)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function b(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function x(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?b(Object(t),!0).forEach((function(r){$(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):b(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function $(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function j(e,r){if(null==e)return{};var t,n,o=function(e,r){if(null==e)return{};var t,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)t=i[n],r.indexOf(t)>=0||(o[t]=e[t]);return o}(e,r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)t=i[n],r.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}var E=(0,u.yM)();E.watch((function(e){return e.preventDefault()}));var O=(0,u.yM)(),P=(0,u.GW)((function(e){return v.h.post("articles",{article:e}).then((function(e){return e.data.article}))})),V=(0,u.GW)((function(e){return v.h.get("articles/".concat(e)).then((function(e){var r=e.data.article;return{slug:r.slug,title:r.title,description:r.description,body:r.body,tagList:r.tagList}}))})),T=(0,o.Bq)(),w=T.state.map((function(e){var r;return null!==(r=e.slug)&&void 0!==r?r:""})),k=w.map(Boolean).map((function(e){return!e})),C=(0,s.Np)({fields:{slug:{init:""},title:{init:""},description:{init:""},body:{init:""},tagList:{init:[]}}});(0,u.lo)({source:w,clock:T.open,filter:function(e){return!1==!e},target:C.reset});var D=C.fields.tagList.$value;(0,u.lo)({source:w,clock:T.open,filter:Boolean,target:V}),(0,u.eH)({from:V.doneData,to:C.set}),(0,u.UP)({source:C.$values,clock:a,fn:function(e,r){var t,n=e.tagList;return x(x({},j(e,g)),{},{tagList:(t=[].concat(p(n),[r]),Array.from(new Set(t)))})},target:C.set}),(0,u.UP)({source:C.$values,clock:O,fn:function(e,r){var t=e.tagList;return x(x({},j(e,h)),{},{tagList:t.filter((function(e){return e!==r}))})},target:C.set}),(0,u.eH)({from:[P.done,k],to:C.reset}),(0,u.UP)({source:C.$values,clock:C.submit,target:P}),P.doneData.watch((function(e){var r=e.slug;m.m8.replace("/article/".concat(r))}));var S=(0,u.MT)({errors:{}}).on(P.failData,(function(e,r){var t;return null===(t=r.response)||void 0===t?void 0:t.data})).reset(C.$values,T.close),U=function(){var e=(0,o.oR)(S);return(0,d.jsx)(i.KM,{errors:e})},B=function(){var e=(0,s.U$)(C.fields.body),r=e.value,t=e.name,n=e.onChange;return(0,d.jsx)(i.nv,{name:t,placeholder:"Write your article (in markdown)",rows:8,value:r,onChange:function(e){return n(e.target.value)}})},M=function(){var e=(0,s.U$)(C.fields.description),r=e.value,t=e.name,n=e.onChange;return(0,d.jsx)(i.UP,{name:t,placeholder:"What's this article about?",value:r,onChange:function(e){return n(e.target.value)}})},L=function(){var e=(0,s.U$)(C.fields.title),r=e.value,t=e.name,n=e.onChange;return(0,d.jsx)(i.UP,{className:"form-control-lg",name:t,placeholder:"Article Title",value:r,onChange:function(e){return n(e.target.value)}})},A=function(){return(0,d.jsxs)(i.l0,{id:"editor",onSubmit:E,children:[(0,d.jsx)(L,{}),(0,d.jsx)(M,{}),(0,d.jsx)(B,{})]})},F=function(){var e=(0,s.cI)(C).submit,r=(0,o.oR)(P.pending);return(0,d.jsx)(i.zx,{className:"btn-lg btn-primary pull-xs-right",disabled:r,form:"editor",type:"submit",onClick:function(r){r.preventDefault(),e()},children:"Publish article"})},I=function(e){var r=e.children,t=e.onClick;return(0,d.jsxs)("span",{className:"tag-default tag-pill",children:[r,(0,d.jsx)(i.zx,{className:"btn-sm editor-tag",onClick:t,children:(0,d.jsx)("i",{className:"ion-close-round"})})]})},N=function(){return(0,d.jsx)(i.PS,{children:(0,o.sm)(D,{getKey:function(e){return e},fn:function(e){return(0,d.jsx)(I,{onClick:function(){return O(e)},children:e})}})})},R=function(){var e=(0,n.UO)();return(0,o.DD)(T,e),(0,d.jsx)(i.T3,{children:(0,d.jsx)(i.X2,{children:(0,d.jsxs)("div",{className:"col-md-10 offset-md-1 col-xs-12",children:[(0,d.jsx)(U,{}),(0,d.jsx)(A,{}),(0,d.jsx)(f,{}),(0,d.jsx)(N,{}),(0,d.jsx)(F,{})]})})})}},8438:function(e,r,t){t.d(r,{Np:function(){return c},U$:function(){return d},cI:function(){return f}});var n=t(1549),o=t(9041);const i=function({init:e,domain:r,existing:t}){return t||(r?r.store(e):(0,n.MT)(e))},s=function({domain:e,existing:r}){return r||(e?e.event():(0,n.yM)())};function u(e,r,t){var o,u,a,l,c,d,f,v,m,g,h;const p="function"==typeof r.init?r.init():r.init,y=i({domain:t,existing:null===(o=r.units)||void 0===o?void 0:o.$value,init:p}),b=i({domain:t,existing:null===(u=r.units)||void 0===u?void 0:u.$errors,init:[]}),x=b.map((e=>e[0]?e[0]:null)),$=y.map((e=>e!==p)),j=i({domain:t,existing:null===(a=r.units)||void 0===a?void 0:a.$isTouched,init:!1}),E=s({domain:t,existing:null===(l=r.units)||void 0===l?void 0:l.onChange}),O=s({domain:t,existing:null===(c=r.units)||void 0===c?void 0:c.onBlur}),P=s({domain:t,existing:null===(d=r.units)||void 0===d?void 0:d.changed}),V=s({domain:t,existing:null===(f=r.units)||void 0===f?void 0:f.addError}),T=s({domain:t,existing:null===(v=r.units)||void 0===v?void 0:v.validate}),w=s({domain:t,existing:null===(m=r.units)||void 0===m?void 0:m.resetErrors}),k=s({domain:t,existing:null===(g=r.units)||void 0===g?void 0:g.resetValue}),C=s({domain:t,existing:null===(h=r.units)||void 0===h?void 0:h.reset}),D=x.map((e=>null===e));return{changed:P,name:e,$value:y,$errors:b,$firstError:x,$isValid:D,$isDirty:$,$isTouched:j,$touched:j,$field:(0,n.$e)({value:y,errors:b,firstError:x,isValid:D,isDirty:$,isTouched:j}),onChange:E,onBlur:O,addError:V,validate:T,set:E,reset:C,resetErrors:w,resetValue:k,filter:r.filter}}function a({$form:e,validateFormEvent:r,submitEvent:t,resetFormEvent:o,resetValues:i,field:s,rules:u,resetErrors:a,formValidationEvents:l,fieldValidationEvents:c}){const{$value:d,$errors:f,onBlur:v,changed:m,addError:g,validate:h,resetErrors:p,resetValue:y,reset:b}=s,x="function"==typeof u?(0,n.MT)([]):(0,n.$e)(u.map((({source:e})=>e||(0,n.MT)(null)))),$=(j=u,(e,r,t)=>{const n=[],o="function"==typeof j?j(e,r):j;for(let i=0;i<o.length;i++){const s=o[i],u=t?t[i]:null,a=s.validator(e,r,u);"boolean"!=typeof a||a||n.push({rule:s.name,errorText:s.errorText,value:e}),"object"!=typeof a||a.isValid||n.push({rule:s.name,errorText:a.errorText,value:e})}return n});var j;const E=[...l,...c],O=[];if(E.includes("submit")){const r=(0,n.UP)({source:(0,n.$e)({fieldValue:d,form:e,rulesSources:x}),clock:t});O.push(r)}E.includes("blur")&&O.push((0,n.UP)({source:(0,n.$e)({fieldValue:d,form:e,rulesSources:x}),clock:v})),E.includes("change")&&O.push((0,n.UP)({source:(0,n.$e)({fieldValue:d,form:e,rulesSources:x}),clock:(0,n.TS)([m,y,i])})),O.push((0,n.UP)({source:(0,n.$e)({fieldValue:d,form:e,rulesSources:x}),clock:h})),O.push((0,n.UP)({source:(0,n.$e)({fieldValue:d,form:e,rulesSources:x}),clock:r}));const P=(0,n.UP)({source:d,clock:g,fn:(e,{rule:r,errorText:t})=>({rule:r,value:e,errorText:t})});f.on(O,((e,{form:r,fieldValue:t,rulesSources:n})=>$(t,r,n))).on(P,((e,r)=>[r,...e])).reset(p,o,b,a),E.includes("change")||f.reset(m)}function l({$value:e,$touched:r,onChange:t,changed:o,name:i,reset:s,resetValue:u,filter:a},l,c,d,f){r.on(o,(()=>!0)).reset(s,c,d),(0,n.lo)({source:t,filter:a||(()=>!0),target:o}),e.on(o,((e,r)=>r)).on(l,((e,r)=>r.hasOwnProperty(i)?r[i]:e)).reset(s,u,f,c)}function c(e){const{filter:r,domain:t,fields:o,validateOn:i,units:c}=e,d={},f=[],v=[];for(const e in o){if(!o.hasOwnProperty(e))continue;const r=u(e,o[e],t);d[e]=r,f.push(r.$isDirty),v.push(r.$touched)}const m=function(e){const r={};for(const t in e)e.hasOwnProperty(t)&&(r[t]=e[t].$value);return(0,n.$e)(r)}(d),g=function(e){const r=[];for(const t in e){if(!e.hasOwnProperty(t))continue;const{$firstError:n}=e[t];r.push(n)}return(0,n.$e)(r).map((e=>e.every((e=>null===e))))}(d),h=r?(0,n.$e)(g,r,((e,r)=>e&&r)):g,p=(0,n.$e)(f).map((e=>e.some(Boolean))),y=(0,n.$e)(v).map((e=>e.some(Boolean))),b=(0,n.$e)({isValid:g,isDirty:p,touched:y}),x=s({domain:t,existing:null==c?void 0:c.validate}),$=s({domain:t,existing:null==c?void 0:c.submit}),j=s({domain:t,existing:null==c?void 0:c.formValidated}),E=s({domain:t,existing:null==c?void 0:c.setForm}),O=s({domain:t,existing:null==c?void 0:c.reset}),P=s({domain:t,existing:null==c?void 0:c.resetValues}),V=s({domain:t,existing:null==c?void 0:c.resetErrors}),T=s({domain:t,existing:null==c?void 0:c.resetTouched}),w=(0,n.UP)(m,$),k=(0,n.UP)(m,x);for(const e in d){if(!d.hasOwnProperty(e))continue;const r=o[e],t=d[e];l(t,E,O,T,P),r.rules&&a({$form:m,rules:r.rules,submitEvent:$,resetFormEvent:O,resetValues:P,resetErrors:V,validateFormEvent:x,field:t,formValidationEvents:i||["submit"],fieldValidationEvents:r.validateOn?r.validateOn:[]})}return(0,n.lo)({source:w,filter:h,target:j}),(0,n.lo)({source:k,filter:h,target:j}),{fields:d,$values:m,$eachValid:g,$isValid:g,$isDirty:p,$touched:y,$meta:b,submit:$,validate:x,resetTouched:T,reset:O,resetValues:P,resetErrors:V,setForm:E,set:E,formValidated:j}}function d(e){const{value:r,errors:t,firstError:n,isValid:i,isDirty:s,isTouched:u}=(0,o.oR)(e.$field);return{name:e.name,value:r,errors:t,firstError:n,isValid:i,isDirty:s,touched:u,isTouched:u,onChange:e.onChange,onBlur:e.onBlur,addError:e.addError,validate:e.validate,reset:e.reset,set:e.onChange,resetErrors:e.resetErrors,hasError:()=>null!==n,errorText:e=>n?e&&e[n.rule]?e[n.rule]:n.errorText||"":""}}function f(e){const r={},t={};for(const n in e.fields){if(!e.fields.hasOwnProperty(n))continue;const o=d(e.fields[n]);r[n]=o,t[n]=o.value}const{isValid:n,isDirty:i,touched:s}=(0,o.oR)(e.$meta);return{fields:r,values:t,hasError:e=>e?!!r[e]&&Boolean(r[e].firstError):!n,eachValid:n,isValid:n,isDirty:i,isTouched:s,touched:s,errors:e=>r[e]?r[e].errors:[],error:e=>r[e]?r[e].firstError:null,reset:e.reset,errorText:(e,t)=>{const n=r[e];return n&&n.firstError?t&&t[n.firstError.rule]?t[n.firstError.rule]:n.firstError.errorText||"":""},submit:e.submit,setForm:e.setForm,set:e.setForm,formValidated:e.formValidated}}}}]);