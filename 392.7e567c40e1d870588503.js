"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[392],{5392:function(e,t,r){r.r(t),r.d(t,{default:function(){return R}});var n=r(9635),o=r(9041),a=r(797),i=r(8438),c=r(1549),u=(0,c.yM)(),l=(0,c.yM)(),s=(0,i.Np)({fields:{currentTag:{init:""}}});(0,c.UP)({source:s.fields.currentTag.$value,clock:(0,c.lo)(l,{filter:function(e){return"Enter"===e.key}}),target:u}),(0,c.eH)({from:u,to:s.reset});var f=r(4246),d=function(){var e=(0,i.cI)(s).fields;return(0,f.jsx)(a.l0,{onSubmit:function(e){return e.preventDefault()},children:(0,f.jsx)(a.II,{autoComplete:"off",name:"tag-list",placeholder:"Enter tags",value:e.currentTag.value,onChange:function(t){return e.currentTag.onChange(t.target.value)},onKeyDown:l})})},g=r(5599),p=r(2793),v=["tagList"],m=["tagList"];function b(e){return function(e){if(Array.isArray(e))return h(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return h(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return h(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function j(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?y(Object(r),!0).forEach((function(t){x(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):y(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function x(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function O(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var w=(0,c.Fj)("editor-page"),P=w.createEvent(),k=w.createEvent(),C=w.createEffect((function(e){return g.h.post("articles",{article:e}).then((function(e){return e.data.article}))})),S=w.createEffect((function(e){return g.h.get("articles/".concat(e)).then((function(e){var t=e.data.article;return{slug:t.slug,title:t.title,description:t.description,body:t.body,tagList:t.tagList}}))})),D=(0,o.Bq)(),U=D.state.map((function(e){var t;return null!==(t=e.slug)&&void 0!==t?t:""})),E=U.map(Boolean).map((function(e){return!e})),L=(0,i.Np)({fields:{slug:{init:""},title:{init:""},description:{init:""},body:{init:""},tagList:{init:[]}}});(0,c.lo)({source:U,clock:D.open,filter:function(e){return!1==!e},target:L.reset});var $=L.fields.tagList.$value;(0,c.lo)({source:U,clock:D.open,filter:Boolean,target:S}),(0,c.eH)({from:S.doneData,to:L.set}),(0,c.UP)({source:L.$values,clock:u,fn:function(e,t){var r,n=e.tagList;return j(j({},O(e,v)),{},{tagList:(r=[].concat(b(n),[t]),Array.from(new Set(r)))})},target:L.set}),(0,c.UP)({source:L.$values,clock:k,fn:function(e,t){var r=e.tagList;return j(j({},O(e,m)),{},{tagList:r.filter((function(e){return e!==t}))})},target:L.set}),(0,c.eH)({from:[C.done,E],to:L.reset}),(0,c.UP)({source:L.$values,clock:L.submit,target:C}),C.doneData.watch((function(e){var t=e.slug;p.m8.replace("/article/".concat(t))}));var A=w.createStore({errors:{}}).on(C.failData,(function(e,t){var r;return null===(r=t.response)||void 0===r?void 0:r.data})).reset(L.$values,D.close),I=function(){var e=(0,o.oR)(A);return(0,f.jsx)(a.KM,{errors:e})},N=function(){var e=(0,i.U$)(L.fields.body),t=e.value,r=e.name,n=e.onChange;return(0,f.jsx)(a.nv,{name:r,placeholder:"Write your article (in markdown)",rows:8,value:t,onChange:function(e){return n(e.target.value)}})},T=function(){var e=(0,i.U$)(L.fields.description),t=e.value,r=e.name,n=e.onChange;return(0,f.jsx)(a.UP,{name:r,placeholder:"What's this article about?",value:t,onChange:function(e){return n(e.target.value)}})},M=function(){var e=(0,i.U$)(L.fields.title),t=e.value,r=e.name,n=e.onChange;return(0,f.jsx)(a.UP,{className:"form-control-lg",name:r,placeholder:"Article Title",value:t,onChange:function(e){return n(e.target.value)}})},B=function(){return(0,f.jsxs)(a.l0,{id:"editor",onSubmit:function(e){e.preventDefault(),P()},children:[(0,f.jsx)(M,{}),(0,f.jsx)(T,{}),(0,f.jsx)(N,{})]})},H=function(){var e=(0,i.cI)(L).submit,t=(0,o.oR)(C.pending);return(0,f.jsx)(a.zx,{className:"btn-lg btn-primary pull-xs-right",disabled:t,form:"editor",type:"submit",onClick:function(t){t.preventDefault(),e()},children:"Publish article"})},K=function(e){var t=e.children,r=e.onClick;return(0,f.jsxs)("span",{className:"tag-default tag-pill",children:[t,(0,f.jsx)(a.zx,{className:"btn-sm editor-tag",onClick:r,children:(0,f.jsx)("i",{className:"ion-close-round"})})]})},z=function(){return(0,f.jsx)(a.PS,{children:(0,o.sm)($,{getKey:function(e){return e},fn:function(e){return(0,f.jsx)(K,{onClick:function(){return k(e)},children:e})}})})},R=function(){var e=(0,n.UO)();return(0,o.DD)(D,e),(0,f.jsx)(a.T3,{children:(0,f.jsx)(a.X2,{children:(0,f.jsxs)("div",{className:"col-md-10 offset-md-1 col-xs-12",children:[(0,f.jsx)(I,{}),(0,f.jsx)(B,{}),(0,f.jsx)(d,{}),(0,f.jsx)(z,{}),(0,f.jsx)(H,{})]})})})}}}]);