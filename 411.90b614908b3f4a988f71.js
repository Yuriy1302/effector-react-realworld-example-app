"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[411],{9570:function(e,t,r){r.d(t,{b:function(){return n}});var n=function(e,t){return"limit=".concat(e,"&offset=").concat(t*e)}},3411:function(e,t,r){r.r(t),r.d(t,{default:function(){return w}});var n=r(9041),a=r(9792),c=r(797),i=r(1549),o=r(3719),u=r(5599),s=r(9570),l=r(3081),f=(0,i.GW)((function(e){var t=e.username,r=e.page,n=e.pageSize;return u.h.get("articles?author=".concat(encodeURIComponent(t),"&").concat((0,s.b)(n,r))).then((function(e){return e.data}))})),d=a.Aw({pageSize:5,status:(0,o.status)({effect:f})}),p=d.Gate,g=d.currentPageWasSet,h=d.favoriteToggled,v=d.$currentPage,m=d.$articles,j=(d.$totalPages,d.$feed),x=d.$pageSize,b=d.useModel;j.on(f.doneData,(function(e,t){return t})),(0,i.UP)({source:{username:l.QS,page:v,pageSize:x},clock:[p.open,g],target:f});var P=r(4246),w=function(){(0,n.DD)(p);var e=(0,n.oR)(f.pending),t=b(),r=t.totalPages,i=t.currentPage,o=t.pageSize,u=t.isEmptyFeed;return(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(a.xZ,{show:u}),(0,P.jsx)(a.WG,{children:(0,n.sm)(m,{getKey:function(e){return e.slug},fn:function(e){return(0,P.jsx)("li",{children:(0,P.jsx)(a.p2,{data:e,onClick:function(){return h(e)}})})}})}),(0,P.jsx)(c.tl,{current:i,pageSize:o,total:r,onItemClick:g}),(0,P.jsx)(c.$j,{loading:e})]})}},9792:function(e,t,r){r.d(t,{qn:function(){return h},p2:function(){return m},WG:function(){return j},xZ:function(){return x},Aw:function(){return f}});var n=r(1549),a=r(9041),c=r(5599),i=r(2793);function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){s(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var l={currentPage:1,pageSize:10,status:(0,n.MT)("initial")},f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l,t=u(u({},l),e),r=(0,n.yM)(),o=(0,n.yM)(),s=(0,n.GW)((function(e){return c.h.post("articles/".concat(e,"/favorite")).then((function(e){return e.data}))})),f=(0,n.GW)((function(e){return c.h.delete("articles/".concat(e,"/favorite")).then((function(e){return e.data}))})),d=(0,n.MT)(t.pageSize),p=i.o4.RJ.map((function(e){var t;return null!==(t=new URLSearchParams(e).get("tag"))&&void 0!==t?t:""})),g=i.o4.RJ.map((function(e){var r,n=null!==(r=new URLSearchParams(e).get("page"))&&void 0!==r?r:t.currentPage;return Number(n)-1})),h=(0,n.MT)({articles:[],articlesCount:0}).on([s.done,f.done],(function(e,t){var r=t.params,n=t.result;return u(u({},e),{},{articles:e.articles.map((function(e){return e.slug!==r?e:u(u({},e),{},{favorited:n.article.favorited,favoritesCount:n.article.favoritesCount})}))})})),v=h.map((function(e){return e.articles})),m=h.map((function(e){return e.articlesCount})),j=t.status,x=(0,n.$e)(j,v,(function(e,t){return"done"===e&&0===t.length}));(0,n.UP)({source:i.o4.y5,clock:r,fn:function(e,t){return{path:e,page:t}}}).watch((function(e){var t=e.path,r=e.page;i.m8.replace("".concat(t,"?page=").concat(r))})),(0,n.lo)({source:o,filter:function(e){return!0===e.favorited},target:f.prepend((function(e){return e.slug}))}),(0,n.lo)({source:o,filter:function(e){return!1===e.favorited},target:s.prepend((function(e){return e.slug}))}),(0,n.lo)({source:s.failData,filter:function(e){var t;return 401===(null===(t=e.response)||void 0===t?void 0:t.status)}}).watch((function(){i.m8.push(i.nn.LOGIN)}));var b=(0,n.$e)({pageSize:d,currentPage:g,currentTag:p,totalPages:m,isEmptyFeed:x});return{Gate:(0,a.Bq)(),currentPageWasSet:r,favoriteToggled:o,setFavoriteArticleFx:s,setUnfavoriteArticleFx:f,$feed:h,$articles:v,$pageSize:d,$currentPage:g,$currentTag:p,$totalPages:m,$isEmptyFeed:x,useModel:function(){return(0,a.oR)(b)}}},d=r(4289),p=r(797),g=r(4246),h=function(e){var t=e.author,r=e.createdAt,n=e.children;return(0,g.jsxs)("div",{className:"article-meta",children:[(0,g.jsx)(d.rU,{to:"/@".concat(t.username),children:(0,g.jsx)("img",{alt:t.username,src:t.image})}),(0,g.jsxs)("div",{className:"info",children:[(0,g.jsx)(d.rU,{className:"author",to:"/@".concat(t.username),children:t.username}),(0,g.jsx)("span",{className:"date",children:new Date(r).toDateString()})]}),n]})},v=function(e){var t=e.active,r=e.onClick,n=e.children;return(0,g.jsxs)(p.zx,{className:"btn btn-sm btn-outline-primary","data-active":t,onClick:r,children:[(0,g.jsx)("i",{className:"ion-heart"})," ",n]})},m=function(e){var t=e.data,r=t.author,n=t.createdAt,a=t.slug,c=t.title,i=t.description,o=t.tagList,u=t.favorited,s=t.favoritesCount,l=e.onClick;return(0,g.jsxs)("article",{className:"article-preview",children:[(0,g.jsx)(h,{author:r,createdAt:n,children:(0,g.jsx)("div",{className:"pull-xs-right",children:(0,g.jsx)(v,{active:u,onClick:l,children:s})})}),(0,g.jsxs)(d.rU,{className:"preview-link",to:"/article/".concat(a),children:[(0,g.jsx)("h1",{children:c}),(0,g.jsx)("p",{children:i}),(0,g.jsx)("span",{children:"Read more..."}),(0,g.jsx)(p.PS,{children:o.map((function(e){return(0,g.jsx)(p.Vp,{children:e.toLowerCase()},e)}))})]})]})},j=function(e){var t=e.children;return(0,g.jsx)("ul",{className:"articles-wrapper list-unstyled",children:t})},x=function(e){return e.show?(0,g.jsx)("div",{className:"empty-articles article-preview",children:"No articles are here... yet."}):null}}}]);