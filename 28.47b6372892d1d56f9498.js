"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[28],{6763:function(e,t,n){n.d(t,{qn:function(){return v},fR:function(){return b},o4:function(){return r}});var r={};n.r(r),n.d(r,{createFeed:function(){return f}});var a=n(1549),i=n(9041),o=n(3719),c=n(6942);function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f(e){var t=e.effect,n=(0,a.yM)(),r=(0,a.GW)((function(e){var t=e.slug;return c.v_("articles/".concat(t,"/favorite")).then((function(e){return e.data}))})),u=(0,a.GW)((function(e){var t=e.slug;return c.IV("articles/".concat(t,"/favorite")).then((function(e){return e.data}))})),l=(0,a.MT)({articlesCount:0,articles:[]}).on(t.doneData,(function(e,t){return t})).on(n,(function(e,t){return s(s({},e),{},{articles:e.articles.map((function(e){return e.slug!==t.slug?e:s(s({},e),{},{favorited:!e.favorited,favoritesCount:e.favorited?e.favoritesCount-1:e.favoritesCount+1})}))})})).on([r.done,u.done],(function(e,t){var n=t.params,r=t.result;return s(s({},e),{},{articles:e.articles.map((function(e){return e.slug!==n.slug?e:s(s({},e),{},{favorited:r.article.favorited,favoritesCount:r.article.favoritesCount})}))})})).on([r.fail,u.fail],(function(e,t){var n=t.params;return s(s({},e),{},{articles:e.articles.map((function(e){return e.slug!==n.slug?e:s(s({},e),{},{favorited:n.favorited,favoritesCount:n.favoritesCount})}))})})),f=l.map((function(e){return e.articlesCount})),d=l.map((function(e){return e.articles})),p=(0,o.status)({effect:t}),g=(0,a.$e)(p,d,(function(e,t){return("done"===e||"fail"===e)&&0===t.length}));return(0,a.Vl)({source:n,match:{favorite:function(e){return!0===e.favorited},unfavorite:function(e){return!1===e.favorited}},cases:{favorite:u,unfavorite:r}}),{favoriteArticleToggled:n,setUnfavoriteArticleFx:u,$feed:l,$totalPages:f,$articles:d,$isEmptyFeed:g,selectors:{useLoading:function(){return(0,i.oR)(t.pending)},useIsEmpty:function(){return(0,i.oR)(g)}}}}var d=n(4246),p=function(e){var t=e.children;return(0,d.jsx)("ul",{className:"articles-wrapper list-unstyled",children:t})},g=n(303),v=function(e){var t=e.author,n=e.createdAt,r=e.children;return(0,d.jsxs)("div",{className:"article-meta",children:[(0,d.jsx)(g.rU,{to:"/@".concat(t.username),children:(0,d.jsx)("img",{alt:t.username,src:t.image})}),(0,d.jsxs)("div",{className:"info",children:[(0,d.jsx)(g.rU,{className:"author",to:"/@".concat(t.username),children:t.username}),(0,d.jsx)("span",{className:"date",children:new Date(n).toDateString()})]}),r]})},m=n(7391),h=function(e){var t=e.active,n=e.onClick,r=e.children;return(0,d.jsxs)(m.zx,{className:"button-favorite btn-outline-primary","data-active":t,size:"sm",onClick:n,children:[(0,d.jsx)("i",{className:"ion-heart"})," ",r]})},j=function(e){var t=e.data,n=t.author,r=t.createdAt,a=t.slug,i=t.title,o=t.description,c=t.tagList,u=t.favorited,s=t.favoritesCount,l=e.onClick;return(0,d.jsxs)("article",{className:"article-preview",children:[(0,d.jsx)(v,{author:n,createdAt:r,children:(0,d.jsx)("div",{className:"pull-xs-right",children:(0,d.jsx)(h,{active:u,onClick:l,children:s})})}),(0,d.jsxs)(g.rU,{className:"preview-link",to:"/article/".concat(a),children:[(0,d.jsx)("h1",{children:i}),(0,d.jsx)("p",{children:o}),(0,d.jsx)("span",{children:"Read more..."}),(0,d.jsx)(m.PS,{children:c.map((function(e){return(0,d.jsx)(m.Vp,{children:e.toLowerCase()},e)}))})]})]})},x=function(e){return e.show?(0,d.jsx)("div",{className:"empty-articles article-preview",children:"No articles are here... yet."}):null},b=function(e){var t=e.loading,n=e.isEmpty,r=e.pageSize,a=e.pageNumber,o=e.totalPages,c=e.articles,u=e.onPageChange,s=e.onArticleClick;return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(x,{show:n}),(0,d.jsx)(p,{children:(0,i.sm)(c,{getKey:function(e){return e.slug},fn:function(e){return(0,d.jsx)("li",{children:(0,d.jsx)(j,{data:e,onClick:function(){return s(e)}})})}})}),(0,d.jsx)(m.tl,{current:a,pageSize:r,total:o,onPageChange:u}),(0,d.jsx)(m.$j,{loading:t})]})}},6925:function(e,t,n){n.d(t,{F:function(){return i}});var r=n(1549),a=n(8737);function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.pageSize,n=void 0===t?10:t,i=(0,r.yM)(),o=(0,r.MT)(n),c=(0,r.MT)("1").on(i.map(String),(function(e,t){return t})),u=c.map(Number);(0,a.tJ)({store:c,key:"page"});var s=u.map((function(e){return e-1}));return{paginationChanged:i,$pageSize:o,$pageNumber:u,$pageIndex:s}}n(7405)},7028:function(e,t,n){n.r(t),n.d(t,{default:function(){return S}});var r=n(9041),a=n(6763),i=n(1549),o=n(6925),c=n(6942),u=n(3300),s=n(9895),l=(0,i.GW)((function(e){var t=e.username,n=e.pageIndex,r=e.pageSize;return c.U2("articles?favorited=".concat(encodeURIComponent(t),"&").concat((0,u.b)(r,n))).then((function(e){return e.data}))})),f=(0,o.F)({pageSize:5}),d=f.paginationChanged,p=f.$pageSize,g=f.$pageIndex,v=f.$pageNumber,m=a.o4.createFeed({effect:l}),h=m.favoriteArticleToggled,j=(m.$feed,m.$isEmptyFeed),x=m.$articles,b=m.$totalPages,C=m.setUnfavoriteArticleFx,y=(0,r.Bq)();(0,i.lo)({source:{username:s.o4.$username,pageSize:p,pageIndex:g},filter:function(e){return Boolean(e.username)},clock:[y.open,d,C.done],target:l});var O=function(){return(0,r.oR)(l.pending)},w=function(){return(0,r.oR)(j)},N=function(){return(0,r.oR)(b)},P=function(){return(0,r.oR)(p)},$=function(){return(0,r.oR)(v)},k=n(4246),S=function(){(0,r.DD)(y);var e=O(),t=w(),n=P(),i=$(),o=N();return(0,k.jsx)(a.fR,{articles:x,isEmpty:t,loading:e,pageNumber:i,pageSize:n,totalPages:o,onArticleClick:h,onPageChange:d})}},3300:function(e,t,n){n.d(t,{b:function(){return r}});var r=function(e,t){return"limit=".concat(e,"&offset=").concat(t*e)}}}]);