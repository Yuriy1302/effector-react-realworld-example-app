"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[28],{6763:function(e,n,t){t.d(n,{qn:function(){return h},fR:function(){return P},o4:function(){return r}});var r={};t.r(r),t.d(r,{createFeed:function(){return g},createPagination:function(){return d}});var a=t(1549),i=t(9041),c=t(8737),o=t(3719),u=t(6942);function s(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function l(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?s(Object(t),!0).forEach((function(n){f(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):s(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function f(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function g(e){var n=e.pageSize,t=e.effect,r=(0,a.MT)({articlesCount:0,articles:[]}).on(t.doneData,(function(e,n){return n})),c=r.map((function(e){return e.articlesCount})),s=r.map((function(e){return e.articles})),f=(0,o.status)({effect:t}),g=(0,a.$e)(f,s,(function(e,n){return("done"===e||"fail"===e)&&0===n.length})),p=d(n),m=p.paginationChanged,v=p.$pageSize,h=p.$pageIndex,j=p.$pageNumber;return{paginationChanged:m,favoriteArticleToggled:function(e){var n=(0,a.yM)(),t=(0,a.GW)((function(e){var n=e.slug;return u.v_("articles/".concat(n,"/favorite")).then((function(e){return e.data}))})),r=(0,a.GW)((function(e){var n=e.slug;return u.IV("articles/".concat(n,"/favorite")).then((function(e){return e.data}))}));return e.on([t.done,r.done],(function(e,n){var t=n.params,r=n.result;return l(l({},e),{},{articles:e.articles.map((function(e){return e.slug!==t.slug?e:l(l({},e),{},{favorited:r.article.favorited,favoritesCount:r.article.favoritesCount})}))})})),(0,a.Vl)({source:n,match:{favorite:function(e){return!0===e.favorited},unfavorite:function(e){return!1===e.favorited}},cases:{favorite:r,unfavorite:t}}),{favoriteArticleToggled:n}}(r).favoriteArticleToggled,$totalPages:c,$articles:s,$isEmptyFeed:g,$pageSize:v,$pageIndex:h,$pageNumber:j,selectors:{useLoading:function(){return(0,i.oR)(t.pending)},useIsEmpty:function(){return(0,i.oR)(g)},usePageSize:function(){return(0,i.oR)(v)},usePageIndex:function(){return(0,i.oR)(h)},usePageNumber:function(){return(0,i.oR)(j)},useTotalPages:function(){return(0,i.oR)(c)}}}}function d(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,n=(0,a.yM)(),t=(0,a.MT)(e),r=(0,a.MT)("1").on(n.map(String),(function(e,n){return n})),i=r.map(Number);(0,c.tJ)({store:r,key:"page"});var o=i.map((function(e){return e-1}));return{paginationChanged:n,$pageSize:t,$pageNumber:i,$pageIndex:o}}var p=t(4246),m=function(e){var n=e.children;return(0,p.jsx)("ul",{className:"articles-wrapper list-unstyled",children:n})},v=t(303),h=function(e){var n=e.author,t=e.createdAt,r=e.children;return(0,p.jsxs)("div",{className:"article-meta",children:[(0,p.jsx)(v.rU,{to:"/@".concat(n.username),children:(0,p.jsx)("img",{alt:n.username,src:n.image})}),(0,p.jsxs)("div",{className:"info",children:[(0,p.jsx)(v.rU,{className:"author",to:"/@".concat(n.username),children:n.username}),(0,p.jsx)("span",{className:"date",children:new Date(t).toDateString()})]}),r]})},j=t(2636),x=function(e){var n=e.active,t=e.onClick,r=e.children;return(0,p.jsxs)(j.zx,{className:"btn-outline-primary","data-active":n,size:"sm",onClick:t,children:[(0,p.jsx)("i",{className:"ion-heart"})," ",r]})},b=function(e){var n=e.data,t=n.author,r=n.createdAt,a=n.slug,i=n.title,c=n.description,o=n.tagList,u=n.favorited,s=n.favoritesCount,l=e.onClick;return(0,p.jsxs)("article",{className:"article-preview",children:[(0,p.jsx)(h,{author:t,createdAt:r,children:(0,p.jsx)("div",{className:"pull-xs-right",children:(0,p.jsx)(x,{active:u,onClick:l,children:s})})}),(0,p.jsxs)(v.rU,{className:"preview-link",to:"/article/".concat(a),children:[(0,p.jsx)("h1",{children:i}),(0,p.jsx)("p",{children:c}),(0,p.jsx)("span",{children:"Read more..."}),(0,p.jsx)(j.PS,{children:o.map((function(e){return(0,p.jsx)(j.Vp,{children:e.toLowerCase()},e)}))})]})]})},y=function(e){return e.show?(0,p.jsx)("div",{className:"empty-articles article-preview",children:"No articles are here... yet."}):null},P=function(e){var n=e.loading,t=e.isEmpty,r=e.pageSize,a=e.pageNumber,c=e.totalPages,o=e.articles,u=e.onPageChange,s=e.onArticleClick;return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(y,{show:t}),(0,p.jsx)(m,{children:(0,i.sm)(o,{getKey:function(e){return e.slug},fn:function(e){return(0,p.jsx)("li",{children:(0,p.jsx)(b,{data:e,onClick:function(){return s(e)}})})}})}),(0,p.jsx)(j.tl,{current:a,pageSize:r,total:c,onPageChange:u}),(0,p.jsx)(j.$j,{loading:n})]})}},7028:function(e,n,t){t.r(n),t.d(n,{default:function(){return v}});var r=t(7378),a=t(9635),i=t(6763),c=t(1549),o=t(6942),u=t(3300),s=(0,c.GW)((function(e){var n=e.username,t=e.pageIndex,r=e.pageSize;return o.U2("articles?favorited=".concat(encodeURIComponent(n),"&").concat((0,u.b)(r,t))).then((function(e){return e.data}))})),l=i.o4.createFeed({effect:s,pageSize:5}),f=l.paginationChanged,g=l.favoriteArticleToggled,d=(l.$pageIndex,l.$pageSize,l.$articles),p=l.selectors,m=t(4246),v=function(){var e=(0,a.UO)().username,n=p.useLoading(),t=p.useIsEmpty(),c=p.usePageSize(),o=p.usePageIndex(),u=p.usePageNumber(),l=p.useTotalPages(),v=(0,r.useCallback)((function(){s({username:e,pageIndex:o,pageSize:c})}),[e,o,c]);return(0,r.useEffect)((function(){v()}),[v]),(0,m.jsx)(i.fR,{articles:d,isEmpty:t,loading:n,pageNumber:u,pageSize:c,totalPages:l,onArticleClick:g,onPageChange:function(e){f(e),v()}})}},3300:function(e,n,t){t.d(n,{b:function(){return r}});var r=function(e,n){return"limit=".concat(e,"&offset=").concat(n*e)}}}]);